<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Roblox Search</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="google-container">
        <img src="images/logo.png" alt="Roblox" class="main-logo" onerror="this.src='https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png'">
        
        <div class="search-bar-container">
            <input type="text" id="searchInput" placeholder="Search Roblox players..." onkeydown="if(event.key==='Enter') startSearch()">
            <button onclick="startSearch()" class="search-btn">Roblox Search</button>
        </div>

        <div id="results-area" class="results-area">
            </div>
    </div>

    <script>
        async function startSearch() {
            const query = document.getElementById('searchInput').value;
            const resultsArea = document.getElementById('results-area');
            
            if (!query) return;

            try {
                // Change 'localhost:3000' to your Render URL after deploying
                const response = await fetch(`http://localhost:3000/api/search/${query}`);
                const data = await response.json();

                if (data.error) {
                    resultsArea.innerHTML = `<p style="color:red">No results found for ${query}</p>`;
                    return;
                }

                const statusColor = data.status === 2 ? '#00a2ff' : (data.status === 1 ? '#00e676' : '#70757a');
                const statusText = data.status === 2 ? 'In Game' : (data.status === 1 ? 'Online' : 'Offline');

                resultsArea.innerHTML = `
                    <div class="google-result">
                        <div class="res-url">https://www.roblox.com › users › ${data.id}</div>
                        <a href="https://www.roblox.com/users/${data.id}/profile" target="_blank" class="res-title">${data.displayName} (@${data.username})</a>
                        <div class="res-content">
                            <img src="${data.pfp}" class="res-thumb">
                            <div class="res-text">
                                <p><strong>Status:</strong> <span style="color:${statusColor}">${statusText}</span></p>
                                <p><strong>Location:</strong> ${data.location}</p>
                                <p><strong>Joined:</strong> ${data.created}</p>
                                <p class="res-bio">${data.description || 'No bio available.'}</p>
                            </div>
                        </div>
                    </div>
                `;
            } catch (err) {
                alert("Error connecting to server!");
            }
        }
    </script>
</body>
</html>
