<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox Player Finder (No Backend)</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0a0b10; color: white; display: flex; flex-direction: column; align-items: center; padding: 40px; }
        .search-box { background: #161922; padding: 25px; border-radius: 12px; width: 100%; max-width: 400px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        input { width: 80%; padding: 12px; border-radius: 6px; border: 1px solid #333; background: #0a0b10; color: white; margin-bottom: 15px; }
        button { background: #00a2ff; color: white; border: none; padding: 12px 25px; border-radius: 6px; cursor: pointer; font-weight: bold; width: 87%; }
        
        #result-card { display: none; margin-top: 20px; background: #161922; width: 100%; max-width: 400px; border-radius: 12px; padding: 20px; text-align: center; }
        .pfp { width: 100px; height: 100px; border-radius: 50%; border: 3px solid #00a2ff; margin-bottom: 10px; }
        .status-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; margin-top: 10px; }
        .online { background: #00e676; } .offline { background: #555; } .ingame { background: #00a2ff; }
    </style>
</head>
<body>

    <div class="search-box">
        <h2>Roblox Lookup</h2>
        <input type="text" id="usernameInput" placeholder="Enter Username...">
        <button onclick="searchPlayer()">Search Player</button>
    </div>

    <div id="result-card">
        <img id="pfp" class="pfp" src="">
        <h2 id="displayName" style="margin: 5px 0;"></h2>
        <p id="userName" style="color: #888; margin: 0;"></p>
        <div id="statusBadge" class="status-badge">OFFLINE</div>
        <p style="margin-top: 15px; font-size: 14px;">User ID: <span id="userId"></span></p>
    </div>

    <script>
        async function searchPlayer() {
            const username = document.getElementById('usernameInput').value;
            const card = document.getElementById('result-card');
            
            try {
                // 1. Get ID using RoProxy (replaces roblox.com)
                const userRes = await fetch(`https://users.roproxy.com/v1/usernames/users`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({usernames: [username], excludeBannedUsers: true})
                });
                const userData = await userRes.json();
                if (!userData.data.length) return alert("User not found!");

                const user = userData.data[0];
                const id = user.id;

                // 2. Get Presence and Thumbnail
                const [presRes, thumbRes] = await Promise.all([
                    fetch(`https://presence.roproxy.com/v1/presence/users`, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({userIds: [id]})
                    }),
                    fetch(`https://thumbnails.roproxy.com/v1/users/avatar-headshot?userIds=${id}&size=150x150&format=Png`)
                ]);

                const presData = await presRes.json();
                const thumbData = await thumbRes.json();
                const presence = presData.userPresences[0];

                // Update UI
                card.style.display = 'block';
                document.getElementById('displayName').innerText = user.displayName;
                document.getElementById('userName').innerText = '@' + user.name;
                document.getElementById('userId').innerText = id;
                document.getElementById('pfp').src = thumbData.data[0].imageUrl;

                const badge = document.getElementById('statusBadge');
                const statusTypes = ["offline", "online", "ingame", "studio"];
                const statusLabels = ["OFFLINE", "ONLINE", "IN GAME", "IN STUDIO"];
                
                badge.innerText = statusLabels[presence.userPresenceType];
                badge.className = 'status-badge ' + statusTypes[presence.userPresenceType];

            } catch (err) {
                alert("Error: The proxy might be down or rate-limited.");
            }
        }
    </script>
</body>
</html>
